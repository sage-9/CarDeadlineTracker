<Window x:Class="CarDeadlineTracker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Car Document Deadline Tracker" Height="600" Width="1200">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.35*"/>
            <ColumnDefinition Width="0.65*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="10">
            
            <TextBlock Text="🚨 Overdue Deadlines" FontSize="18" FontWeight="Bold" Foreground="Red" Margin="0,0,0,5"/>
            <ListView ItemsSource="{Binding OverdueDeadlines}" Height="200" Margin="0,0,0,20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Car" DisplayMemberBinding="{Binding CarNumberPlate}" Width="80"/>
                        <GridViewColumn Header="Document" DisplayMemberBinding="{Binding ItemName}" Width="150"/>
                        <GridViewColumn Header="Due" DisplayMemberBinding="{Binding DateOfExpiry, StringFormat='{}{0:d}'}" Width="80"/>
                        <GridViewColumn Header="Done">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsDone, Mode=TwoWay}" 
                                              Command="{Binding DataContext.ToggleDoneCommand, RelativeSource={RelativeSource AncestorType=ListView}}" 
                                              CommandParameter="{Binding}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>

            <TextBlock Text="📅 Upcoming Deadlines (Next 60 Days)" FontSize="18" FontWeight="Bold" Margin="0,15,0,5"/>
            <ListView ItemsSource="{Binding UpcomingDeadlines}" Height="200">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Car" DisplayMemberBinding="{Binding CarNumberPlate}" Width="80"/>
                        <GridViewColumn Header="Document" DisplayMemberBinding="{Binding ItemName}" Width="150"/>
                        <GridViewColumn Header="Due" DisplayMemberBinding="{Binding DateOfExpiry, StringFormat='{}{0:d}'}" Width="80"/>
                        <GridViewColumn Header="Done">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsDone, Mode=TwoWay}" 
                                              Command="{Binding DataContext.ToggleDoneCommand, RelativeSource={RelativeSource AncestorType=ListView}}" 
                                              CommandParameter="{Binding}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>
            
        </StackPanel>

        <StackPanel Grid.Column="1" Margin="10">
            <TextBlock Text="My Cars" FontSize="24" FontWeight="Bold" Margin="0,0,0,10"/>
            
            <ListView ItemsSource="{Binding Cars}" SelectedItem="{Binding SelectedCar}" Height="450">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Number Plate" DisplayMemberBinding="{Binding NumberPlate}" Width="150"/>
                        <GridViewColumn Header="Brand" DisplayMemberBinding="{Binding Brand}" Width="100"/>
                        <GridViewColumn Header="Make" DisplayMemberBinding="{Binding Make}" Width="100"/>
                        <GridViewColumn Header="Branch Location" DisplayMemberBinding="{Binding BranchLocation}" Width="150"/>
                    </GridView>
                </ListView.View>
            </ListView>
            
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                <Button Content="Add New Car" Command="{Binding AddCarCommand}" Padding="10,5" Margin="0,0,10,0"/>
                <Button Content="Edit Selected" Command="{Binding EditCarCommand}" Padding="10,5" Margin="0,0,10,0"/>
                <Button Content="View Selected" Command="{Binding ViewCarCommand}" Padding="10,5" Margin="0,0,10,0"/>
                <Button Content="Delete Selected" Command="{Binding DeleteCarCommand}" Padding="10,5"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>